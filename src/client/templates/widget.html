<div id="ai-coauthor-widget" style="
  position: fixed;
  bottom: 20px;
  right: 20px;
  z-index: 10000;
  font-family: system-ui, -apple-system, sans-serif;
">
  <button id="ai-coauthor-toggle" style="
    background: #4F46E5;
    color: white;
    border: none;
    border-radius: 50%;
    width: 56px;
    height: 56px;
    cursor: pointer;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    font-size: 24px;
  ">
    ğŸ’¬
  </button>
  
  <div id="ai-coauthor-panel" style="
    display: none;
    position: absolute;
    bottom: 70px;
    right: 0;
    width: 320px;
    background: white;
    border-radius: 12px;
    box-shadow: 0 8px 24px rgba(0,0,0,0.15);
    padding: 20px;
  ">
    <h3 style="margin: 0 0 16px 0; font-size: 18px; color: #1F2937;">
      ğŸ“ Doc Feedback
    </h3>
    
    <fieldset style="margin-bottom: 16px; border: none; padding: 0;">
      <legend style="display: block; margin-bottom: 8px; font-size: 14px; color: #6B7280; padding: 0;">
        How helpful is this page?
      </legend>
      <div id="ai-coauthor-rating" style="display: flex; gap: 8px;">
        <button class="rating-btn" data-rating="1">ğŸ˜</button>
        <button class="rating-btn" data-rating="2">ğŸ˜</button>
        <button class="rating-btn" data-rating="3">ğŸ™‚</button>
        <button class="rating-btn" data-rating="4">ğŸ˜Š</button>
        <button class="rating-btn" data-rating="5">ğŸ¤©</button>
      </div>
    </fieldset>

    <div style="margin-bottom: 16px;">
      <label for="ai-coauthor-category" style="display: block; margin-bottom: 8px; font-size: 14px; color: #6B7280;">
        Category
      </label>
      <select id="ai-coauthor-category" style="
        width: 100%;
        padding: 8px;
        border: 1px solid #D1D5DB;
        border-radius: 6px;
        font-size: 14px;
      ">
        <option value="general">General</option>
        <option value="accuracy">Accuracy</option>
        <option value="clarity">Clarity</option>
        <option value="completeness">Completeness</option>
        <option value="outdated">Outdated</option>
      </select>
    </div>

    <div style="margin-bottom: 16px;">
      <label for="ai-coauthor-comment" style="display: block; margin-bottom: 8px; font-size: 14px; color: #6B7280;">
        Comments (optional)
      </label>
      <textarea id="ai-coauthor-comment" placeholder="What could be improved?" style="
        width: 100%;
        height: 80px;
        padding: 8px;
        border: 1px solid #D1D5DB;
        border-radius: 6px;
        font-size: 14px;
        resize: vertical;
      "></textarea>
    </div>

    <button id="ai-coauthor-submit" style="
      width: 100%;
      padding: 10px;
      background: #4F46E5;
      color: white;
      border: none;
      border-radius: 6px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
    ">
      Submit Feedback
    </button>

    <div id="ai-coauthor-status" style="
      margin-top: 12px;
      font-size: 13px;
      color: #059669;
      display: none;
    "></div>

    <!-- Source Context Section -->
    <details style="margin-top: 16px; padding-top: 16px; border-top: 1px solid #E5E7EB;">
      <summary style="
        cursor: pointer;
        font-size: 13px;
        color: #6B7280;
        font-weight: 500;
        user-select: none;
        padding: 4px 0;
      ">
        âš™ï¸ Advanced: Source Context
      </summary>
      
      <div style="margin-top: 12px; font-size: 13px;">
        <p style="color: #6B7280; margin: 0 0 12px 0; line-height: 1.4;">
          Map this page to source code files for AI-powered updates.
        </p>
        
        <!-- Current Frontmatter -->
        <div id="current-frontmatter" style="
          background: #FEF3C7;
          border-radius: 6px;
          padding: 10px;
          margin-bottom: 8px;
          font-size: 11px;
          border: 1px solid #FCD34D;
        ">
          <div style="font-weight: 600; color: #92400E; margin-bottom: 4px;">
            ğŸ“„ Current Frontmatter
          </div>
          <div id="frontmatter-content" style="color: #78350F; font-family: monospace;">
            Loading...
          </div>
        </div>
        
        <div id="source-context-content" style="
          background: #F9FAFB;
          border-radius: 6px;
          padding: 12px;
          margin-bottom: 8px;
        ">
          <div style="color: #9CA3AF; font-style: italic;">
            Click "Detect" to find source files...
          </div>
        </div>
        
        <div style="display: flex; gap: 8px; flex-wrap: wrap;">
          <button id="source-detect-btn" style="
            flex: 1;
            min-width: 80px;
            padding: 6px 12px;
            background: #4F46E5;
            color: #FFFFFF;
            border: none;
            border-radius: 4px;
            font-size: 12px;
            cursor: pointer;
          ">
            ğŸ” Detect
          </button>
          <button id="source-save-btn" style="
            flex: 1;
            min-width: 80px;
            padding: 6px 12px;
            background: #047857;
            color: #FFFFFF;
            border: none;
            border-radius: 6px;
            font-size: 12px;
            cursor: pointer;
            display: none;
          ">
            ğŸ’¾ Save
          </button>
        </div>
      </div>
    </details>
  </div>
</div>

<style>
  .rating-btn {
    background: #F3F4F6;
    border: 2px solid transparent;
    border-radius: 8px;
    padding: 8px;
    font-size: 20px;
    cursor: pointer;
    transition: all 0.2s;
  }
  .rating-btn:hover {
    background: #E5E7EB;
  }
  .rating-btn.selected {
    border-color: #4F46E5;
    background: #EEF2FF;
  }
</style>
